<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin功能测试</title>
    <link rel="stylesheet" href="admin.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Admin图标功能测试</h1>
        
        <div class="test-section">
            <div class="test-title">1. 图标显示测试</div>
            <div class="software-table-container">
                <div class="table-responsive">
                    <table class="software-table">
                        <thead>
                            <tr>
                                <th>项目名称</th>
                                <th>图标显示</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Font Awesome图标</td>
                                <td>
                                    <div class="software-icon-cell">
                                        <div class="table-icon" style="background-color: #2575fc">
                                            <i class="fas fa-code"></i>
                                        </div>
                                        <div>fas fa-code</div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>图片URL图标</td>
                                <td>
                                    <div class="software-icon-cell">
                                        <div class="table-icon table-icon-image" style="background-color: #ff6b6b">
                                            <img src="https://via.placeholder.com/30x30/ff6b6b/ffffff?text=IMG" alt="图标" onerror="this.style.display='none';this.parentElement.innerHTML='<i class=\'fas fa-image\'></i>'">
                                        </div>
                                        <div>https://via.placeholder.com/30x30/ff6b6b/...</div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>无效URL测试</td>
                                <td>
                                    <div class="software-icon-cell">
                                        <div class="table-icon table-icon-image" style="background-color: #4ecdc4">
                                            <img src="https://invalid-url-that-does-not-exist.com/icon.png" alt="图标" onerror="this.style.display='none';this.parentElement.innerHTML='<i class=\'fas fa-image\'></i>'">
                                        </div>
                                        <div>无效URL（应该显示默认图标）</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">2. 表单输入测试</div>
            <form>
                <div class="form-group">
                    <label for="testIcon">图标输入测试</label>
                    <input type="text" id="testIcon" class="form-control" value="fas fa-cube" placeholder="输入图标类名或图片URL">
                    <div class="form-help">可以输入Font Awesome图标类名（如：fas fa-code）或图片URL</div>
                </div>
                
                <div class="form-group">
                    <label for="testIconColor">图标颜色</label>
                    <input type="color" id="testIconColor" class="form-control" value="#2575fc">
                    <div class="form-help">选择图标的背景颜色（对图片URL也生效）</div>
                </div>
                
                <button type="button" class="btn btn-primary" onclick="testIconDisplay()">测试显示效果</button>
            </form>
            
            <div id="testResult" style="margin-top: 20px; padding: 15px; border: 1px dashed #ccc; border-radius: 5px;">
                <p><strong>显示预览：</strong></p>
                <div id="previewContainer"></div>
            </div>
        </div>
    </div>

    <script>
        function testIconDisplay() {
            const iconValue = document.getElementById('testIcon').value;
            const iconColor = document.getElementById('testIconColor').value;
            const previewContainer = document.getElementById('previewContainer');
            
            // 使用我们修改后的getIconHTML函数逻辑
            let iconHTML;
            
            if (iconValue.startsWith('http://') || iconValue.startsWith('https://')) {
                iconHTML = `
                    <div class="table-icon table-icon-image" style="background-color: ${iconColor}">
                        <img src="${iconValue}" alt="图标" onerror="this.style.display='none';this.parentElement.innerHTML='<i class=\'fas fa-image\'></i>'">
                    </div>
                `;
            } else {
                iconHTML = `
                    <div class="table-icon" style="background-color: ${iconColor}">
                        <i class="${iconValue}"></i>
                    </div>
                `;
            }
            
            previewContainer.innerHTML = `
                <div class="software-icon-cell">
                    ${iconHTML}
                    <div>
                        <div>输入值: ${iconValue}</div>
                        <div>颜色: ${iconColor}</div>
                    </div>
                </div>
            `;
        }
        
        // 页面加载后执行一次测试
        document.addEventListener('DOMContentLoaded', function() {
            testIconDisplay();
        });
    </script>
</body>
</html>