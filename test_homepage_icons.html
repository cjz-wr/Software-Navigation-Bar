<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>主页图标功能测试</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        /* 模拟主页的软件网格布局 */
        .software-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>主页图标功能测试</h1>
        
        <div class="test-section">
            <div class="test-title">1. 图标显示测试</div>
            <div class="software-grid" id="testGrid">
                <!-- 测试卡片将通过JavaScript生成 -->
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">2. 手动测试</div>
            <form>
                <div class="form-group">
                    <label for="manualIcon">图标输入测试</label>
                    <input type="text" id="manualIcon" class="form-control" value="fas fa-code" placeholder="输入图标类名或图片URL">
                </div>
                
                <div class="form-group">
                    <label for="manualColor">图标颜色</label>
                    <input type="color" id="manualColor" class="form-control" value="#2575fc">
                </div>
                
                <button type="button" class="btn btn-primary" onclick="testManualIcon()">测试显示效果</button>
            </form>
            
            <div id="manualResult" style="margin-top: 20px; padding: 15px; border: 1px dashed #ccc; border-radius: 5px;">
                <p><strong>显示预览：</strong></p>
                <div id="manualPreview"></div>
            </div>
        </div>
    </div>

    <script>
        // 模拟主页的图标处理函数
        function getHomepageIconHTML(iconValue, backgroundColor) {
            if (!iconValue) {
                iconValue = 'fas fa-cube';
                backgroundColor = '#2575fc';
            }
            
            // 判断是否为URL（简单判断是否包含http或https）
            if (iconValue.startsWith('http://') || iconValue.startsWith('https://')) {
                return `
                    <div class="software-icon software-icon-image" style="background-color: ${backgroundColor}">
                        <img src="${iconValue}" alt="图标" onerror="this.style.display='none';this.parentElement.innerHTML='<i class=\'fas fa-image\'></i>'">
                    </div>
                `;
            } else {
                // Font Awesome 图标类名
                return `
                    <div class="software-icon" style="background-color: ${backgroundColor}">
                        <i class="${iconValue}"></i>
                    </div>
                `;
            }
        }
        
        // 生成测试数据
        const testData = [
            {
                name: "Font Awesome图标",
                icon: "fas fa-code",
                iconColor: "#2575fc",
                description: "这是使用Font Awesome图标的示例",
                category: "development",
                type: "software"
            },
            {
                name: "图片URL图标",
                icon: "https://via.placeholder.com/50x50/ff6b6b/ffffff?text=IMG",
                iconColor: "#ff6b6b",
                description: "这是使用图片URL图标的示例",
                category: "design",
                type: "software"
            },
            {
                name: "无效URL测试",
                icon: "https://invalid-url-that-does-not-exist.com/icon.png",
                iconColor: "#4ecdc4",
                description: "无效URL应该显示默认图标",
                category: "utility",
                type: "software"
            },
            {
                name: "另一个Font Awesome图标",
                icon: "fab fa-github",
                iconColor: "#181717",
                description: "GitHub图标示例",
                category: "development",
                type: "website"
            }
        ];
        
        // 渲染测试卡片
        function renderTestCards() {
            const testGrid = document.getElementById('testGrid');
            testGrid.innerHTML = '';
            
            testData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'software-card';
                
                // 生成类型标签
                const typeTag = `<span class="tag ${item.type}-tag">${item.type === 'software' ? '软件' : '网站'}</span>`;
                
                // 获取图标HTML
                const iconHTML = getHomepageIconHTML(item.icon, item.iconColor);
                
                card.innerHTML = `
                    <div class="card-header">
                        ${iconHTML}
                        <div class="software-info">
                            <h3>${item.name}</h3>
                            <p>${item.category}</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <p>${item.description}</p>
                        <div class="software-tags">
                            ${typeTag}
                        </div>
                    </div>
                    <div class="card-footer">
                        <a href="#" class="visit-btn">
                            <i class="fas fa-external-link-alt"></i> 访问${item.type === 'website' ? '网站' : '官网'}
                        </a>
                    </div>
                `;
                
                testGrid.appendChild(card);
            });
        }
        
        // 手动测试函数
        function testManualIcon() {
            const iconValue = document.getElementById('manualIcon').value;
            const iconColor = document.getElementById('manualColor').value;
            const previewContainer = document.getElementById('manualPreview');
            
            const iconHTML = getHomepageIconHTML(iconValue, iconColor);
            
            previewContainer.innerHTML = `
                <div style="display: flex; align-items: center; gap: 15px;">
                    ${iconHTML}
                    <div>
                        <div><strong>输入值:</strong> ${iconValue}</div>
                        <div><strong>颜色:</strong> ${iconColor}</div>
                    </div>
                </div>
            `;
        }
        
        // 页面加载后渲染测试卡片
        document.addEventListener('DOMContentLoaded', function() {
            renderTestCards();
            testManualIcon(); // 初始化手动测试预览
        });
    </script>
</body>
</html>